{"success": true, "orchestrator": {"intent": "extension_flight_analysis", "reasoning": "Chrome Extension flight analysis"}, "flight_data": {"airline_code": "WN", "airline_name": "Southwest Airlines", "flight_number": "WN1125", "origin_airport_code": "SJC", "destination_airport_code": "PDX", "date": "2025-07-29", "departure_time_local": "3:00 PM", "arrival_time_local": "7:50 PM", "duration_minutes": 290, "connections": [{"airport": "OAK", "airport_code": "OAK", "city": "Oakland", "duration": "7h 25m", "travel_time": "75", "arrival_time": "4:15 PM", "departure_time": "5:00 PM", "layoverInfo": {"weather_risk": {"level": "MEDIUM", "description": "Current conditions: Few Clouds, 92\u00b0F, 72% Humidity, 8.55 mph Wind (158\u00b0), 6.2 miles Visibility, 12% Cloud Coverage. Temperature: N/A. Humidity: N/A. Wind: N/A. Visibility: N/A.", "risk_score": 50, "delay_probability": "Unknown", "cancellation_probability": "Unknown"}, "airport_complexity": {"complexity": "medium", "description": "OAK's single intersecting runway layout, rising terrain, and frequent fog create constraints. High cargo volume and increasing passenger traffic contribute to operational bottlenecks, especially during peak hours.", "concerns": ["Runway intersection management", "Low visibility procedures", "West approach terrain restrictions", "Ground traffic congestion"]}}}], "price": "$199", "airplane_model": "Boeing 737-800", "source": "google_flights_extension", "on_time_rate": 76.9, "on_time_data": {"airline_code": "WN", "years_analyzed": [2016, 2017, 2018], "total_flights_analyzed": 4471, "on_time_rate": 76.9, "performance_metrics": {"cancellation_rate": 0.78, "diversion_rate": 0.0, "delay_rate": 22.34, "severe_delay_rate": 5.37, "avg_departure_delay_minutes": 12.6, "avg_arrival_delay_minutes": 10.8}, "delay_breakdown": {"carrier_delay": 2.2, "weather_delay": 0.0, "nas_delay": 0.5, "security_delay": 0.0, "late_aircraft_delay": 6.8}, "data_reliability": "real_historical_data", "query_timestamp": "2025-07-29T23:29:28.823414"}, "origin_analysis": {"airport_code": "SJC", "airport_name": "San Jose International Airport", "city": "San Jose", "state": "CA", "travel_date": "2025-07-29", "weather_available": true, "timestamp": "2025-07-29T23:29:31.467541", "weather_conditions": {"conditions": "Overcast Clouds", "temperature": "79\u00b0F", "humidity": "88%", "wind": "9.19 mph", "visibility": "6.2 miles", "parsed_conditions": "Overcast Clouds", "risk_level": "low"}, "flight_risk_assessment": {"error": "name 'cache_key' is not defined"}, "data_source": "OpenWeatherMap API", "fallback_used": false, "airport_complexity": {"complexity": "medium", "description": "SJC faces operational complexity due to limited runway configuration, concentrated peak hours, and frequent weather-related disruptions impacting flight schedules and ground operations.", "concerns": ["Single parallel runway dependency", "Peak hour congestion", "Weather impacts (fog, rain)", "Limited terminal capacity"]}, "weather_risk": {"level": "LOW", "description": "Current conditions: Overcast Clouds. Temperature: 79\u00b0F. Humidity: 88%. Wind: 9.19 mph. Visibility: 6.2 miles.", "risk_score": 50, "delay_probability": "Unknown", "cancellation_probability": "Unknown"}}, "origin_weather": {"weather_risk": {"level": "LOW", "description": "Current conditions: Overcast Clouds. Temperature: 79\u00b0F. Humidity: 88%. Wind: 9.19 mph. Visibility: 6.2 miles.", "risk_score": 50, "delay_probability": "Unknown", "cancellation_probability": "Unknown"}, "airport_complexity": {"complexity": "medium", "description": "SJC faces operational complexity due to limited runway configuration, concentrated peak hours, and frequent weather-related disruptions impacting flight schedules and ground operations.", "concerns": ["Single parallel runway dependency", "Peak hour congestion", "Weather impacts (fog, rain)", "Limited terminal capacity"]}, "weather_conditions": {"conditions": "Current conditions: Overcast Clouds. Temperature: 79\u00b0F. Humidity: 88%. Wind: 9.19 mph. Visibility: 6.2 miles."}}, "destination_analysis": {"airport_code": "PDX", "airport_name": "Portland International Airport", "city": "Portland", "state": "OR", "travel_date": "2025-07-29", "weather_available": true, "timestamp": "2025-07-29T23:29:34.082994", "weather_conditions": {"conditions": "Scattered Clouds", "temperature": "89\u00b0F", "humidity": "56%", "wind": "13.02 mph", "visibility": "6.2 miles", "parsed_conditions": "Scattered Clouds", "risk_level": "low"}, "flight_risk_assessment": {"error": "name 'cache_key' is not defined"}, "data_source": "OpenWeatherMap API", "fallback_used": false, "airport_complexity": {"complexity": "medium", "description": "PDX faces moderate operational complexity due to weather impacts (fog, rain), single runway dependency during maintenance, and growing passenger volume straining terminal capacity. Airspace is manageable but requires efficient coordination.", "concerns": ["Runway availability and maintenance impacts", "Fog and low visibility disruptions", "Terminal capacity constraints during peak hours", "Efficient ground handling for on-time performance"]}, "weather_risk": {"level": "LOW", "description": "Current conditions: Scattered Clouds. Temperature: 89\u00b0F. Humidity: 56%. Wind: 13.02 mph. Visibility: 6.2 miles.", "risk_score": 50, "delay_probability": "Unknown", "cancellation_probability": "Unknown"}}, "destination_weather": {"weather_risk": {"level": "LOW", "description": "Current conditions: Scattered Clouds. Temperature: 89\u00b0F. Humidity: 56%. Wind: 13.02 mph. Visibility: 6.2 miles.", "risk_score": 50, "delay_probability": "Unknown", "cancellation_probability": "Unknown"}, "airport_complexity": {"complexity": "medium", "description": "PDX faces moderate operational complexity due to weather impacts (fog, rain), single runway dependency during maintenance, and growing passenger volume straining terminal capacity. Airspace is manageable but requires efficient coordination.", "concerns": ["Runway availability and maintenance impacts", "Fog and low visibility disruptions", "Terminal capacity constraints during peak hours", "Efficient ground handling for on-time performance"]}, "weather_conditions": {"conditions": "Current conditions: Scattered Clouds. Temperature: 89\u00b0F. Humidity: 56%. Wind: 13.02 mph. Visibility: 6.2 miles."}}}, "risk_analysis": {"overall_risk_score": 24, "risk_level": "low", "delay_probability": "75-112%", "cancellation_probability": "2.7-4.0%", "key_risk_factors": ["\ud83c\udfd6\ufe0f Peak summer travel causes airport delays", "\ud83d\udd25 High temperatures may impact aircraft performance", "\u2708\ufe0f Increased demand strains crew availability", "\u2600\ufe0f Clear skies increase leisure flight volume", "\ud83e\uddf3 Summer vacation demand raises baggage risk"], "recommendations": ["Monitor weather conditions closely leading up to the flight and at the layover airport.", "Pack essential items in your carry-on in case of delays or cancellations.", "Check the flight status frequently for any updates or changes.", "Consider purchasing travel insurance that covers potential delays or cancellations."], "explanation": "The algorithm assessed the flight risk based on a combination of factors including historical flight data, weather conditions at both airports, airport complexity, and the presence of a layover. While the overall risk score is low, the algorithm projects a high delay probability due to the combined influence of these factors. The cancellation probability remains low, aligning with the historical cancellation rate for this route.", "seasonal_factors": ["\ud83c\udfd6\ufe0f Peak summer travel causes airport delays", "\ud83d\udd25 High temperatures may impact aircraft performance", "\u2708\ufe0f Increased demand strains crew availability", "\u2600\ufe0f Clear skies increase leisure flight volume", "\ud83e\uddf3 Summer vacation demand raises baggage risk"], "historical_performance": {"total_flights_analyzed": 4471, "cancellation_rate": "0.8%", "average_delay": "12.6 minutes", "on_time_performance": "77.7%", "data_source": "BigQuery Historical Data (2016-2018)", "data_reliability": "high"}}, "weather_analysis": {"origin_airport_analysis": {"airport_code": "SJC", "airport_name": "San Jose International Airport", "city": "San Jose", "state": "CA", "travel_date": "2025-07-29", "weather_available": true, "timestamp": "2025-07-29T23:29:31.467541", "weather_conditions": {"conditions": "Overcast Clouds", "temperature": "79\u00b0F", "humidity": "88%", "wind": "9.19 mph", "visibility": "6.2 miles", "parsed_conditions": "Overcast Clouds", "risk_level": "low"}, "flight_risk_assessment": {"error": "name 'cache_key' is not defined"}, "data_source": "OpenWeatherMap API", "fallback_used": false, "airport_complexity": {"complexity": "medium", "description": "SJC faces operational complexity due to limited runway configuration, concentrated peak hours, and frequent weather-related disruptions impacting flight schedules and ground operations.", "concerns": ["Single parallel runway dependency", "Peak hour congestion", "Weather impacts (fog, rain)", "Limited terminal capacity"]}, "weather_risk": {"level": "LOW", "description": "Current conditions: Overcast Clouds. Temperature: 79\u00b0F. Humidity: 88%. Wind: 9.19 mph. Visibility: 6.2 miles.", "risk_score": 50, "delay_probability": "Unknown", "cancellation_probability": "Unknown"}}, "destination_airport_analysis": {"airport_code": "PDX", "airport_name": "Portland International Airport", "city": "Portland", "state": "OR", "travel_date": "2025-07-29", "weather_available": true, "timestamp": "2025-07-29T23:29:34.082994", "weather_conditions": {"conditions": "Scattered Clouds", "temperature": "89\u00b0F", "humidity": "56%", "wind": "13.02 mph", "visibility": "6.2 miles", "parsed_conditions": "Scattered Clouds", "risk_level": "low"}, "flight_risk_assessment": {"error": "name 'cache_key' is not defined"}, "data_source": "OpenWeatherMap API", "fallback_used": false, "airport_complexity": {"complexity": "medium", "description": "PDX faces moderate operational complexity due to weather impacts (fog, rain), single runway dependency during maintenance, and growing passenger volume straining terminal capacity. Airspace is manageable but requires efficient coordination.", "concerns": ["Runway availability and maintenance impacts", "Fog and low visibility disruptions", "Terminal capacity constraints during peak hours", "Efficient ground handling for on-time performance"]}, "weather_risk": {"level": "LOW", "description": "Current conditions: Scattered Clouds. Temperature: 89\u00b0F. Humidity: 56%. Wind: 13.02 mph. Visibility: 6.2 miles.", "risk_score": 50, "delay_probability": "Unknown", "cancellation_probability": "Unknown"}}, "layover_weather_analysis": {"OAK": {"weather_risk": {"level": "medium", "description": "Low risk due to few clouds, good visibility, and light winds. High temperature (92\u00b0F) and 72% humidity could affect aircraft performance. "}, "weather_conditions": {"conditions": "Few Clouds, 92\u00b0F, 72% Humidity, 8.55 mph Wind (158\u00b0), 6.2 miles Visibility, 12% Cloud Coverage"}, "airport_complexity": {"complexity": "high", "description": "OAK is a major international airport with high traffic volume, complex airspace, and potential for congestion, particularly during peak hours. Proximity to the bay can also cause localized weather effects.", "concerns": ["High traffic volume", "Complex airspace", "Proximity to bay area weather"]}, "data_source": "Real-time weather data from OpenWeatherMap API", "fallback_used": false, "airport_code": "OAK", "city": "Unknown City", "state": "Unknown", "airport_name": "OAK Airport", "country": "United States"}}, "layover_complexity_analysis": {"OAK": {"complexity": "medium", "description": "OAK's single intersecting runway layout, rising terrain, and frequent fog create constraints. High cargo volume and increasing passenger traffic contribute to operational bottlenecks, especially during peak hours.", "concerns": ["Runway intersection management", "Low visibility procedures", "West approach terrain restrictions", "Ground traffic congestion"]}}}, "insurance_recommendation": {"success": false, "recommendation": "Low-risk flight with minimal disruption probability. Travel insurance likely unnecessary - save the money for your trip.", "recommendation_type": "skip_insurance", "risk_level": "low", "risk_score": 24, "confidence": "low"}, "analysis_metadata": {"source": "google_flights_extension", "total_time": 15.194712162017822, "steps": {"google_flights_data": 7.963180541992188e-05, "on_time_rate": 1.092334270477295, "weather_analysis": 5.259527206420898, "airport_complexity": 2.197967290878296, "layover_analysis": 2.6598141193389893, "risk_assessment": 3.168147087097168, "insurance_recommendation": 0.0009722709655761719}}, "error": null, "timestamp": "2025-07-29T23:29:42.925373+00:00", "adk_status": {"framework": "Google ADK", "model": "gemini-2.0-flash", "unified_routing": true, "standardized_agents": true}}